!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.retinajs=e()}(this,function(){"use strict";var t="undefined"!=typeof window,e=Math.round(t&&window.devicePixelRatio||1),i=/(\.[A-z]{3,4}\/?(\?.*)?)$/,n=/url\(('|")?([^)'"]+)('|")?\)/i,r="[data-rjs]",o="data-rjs-processed";function a(t){return Array.prototype.slice.call(t)}function u(t,e){var i=t.nodeName.toLowerCase(),n=document.createElement("img");n.addEventListener("load",function(){var n;"img"===i?(n=t,n.hasAttribute("data-no-resize")||(0===n.offsetWidth&&0===n.offsetHeight?(n.setAttribute("width",n.naturalWidth),n.setAttribute("height",n.naturalHeight)):(n.setAttribute("width",n.offsetWidth),n.setAttribute("height",n.offsetHeight))),n).setAttribute("src",e):t.style.backgroundImage="url("+e+")"}),n.setAttribute("src",e),t.setAttribute(o,!0)}function d(t,n){var r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=(r=parseInt(o,10),e<r?e:r);n&&a>1&&u(t,n.replace(i,"@"+a+"x$1"))}function s(t){var i;(i=t,i?"function"==typeof i.forEach?i:a(i):"undefined"!=typeof document?a(document.querySelectorAll(r)):[]).forEach(function(t){if(!t.getAttribute(o)){var i="img"===t.nodeName.toLowerCase()?t.getAttribute("src"):t.style.backgroundImage.replace(n,"$2"),r=t.getAttribute("data-rjs"),a=!isNaN(parseInt(r,10));if(null===r)return;a?d(t,i,r):e>1&&u(t,r)}})}return t&&(window.addEventListener("load",function(){s()}),window.retinajs=s),s});